<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trilha do Saber SAEB 2025 - 9Âº Ano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8; /* Fundo azul claro e suave */
        }
        .board-square {
            transition: transform 0.2s ease-in-out;
        }
        .board-square:hover {
            transform: scale(1.05);
        }
        .player-pawn {
            transition: all 0.5s ease-in-out;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            position: absolute;
            z-index: 10;
            transform: translate(-50%, -50%);
        }
        #player1-pawn {
            background-color: #3b82f6; /* Azul */
            box-shadow: 0 0 10px #3b82f6;
        }
        #player2-pawn {
            background-color: #ef4444; /* Vermelho */
            box-shadow: 0 0 10px #ef4444;
        }
        .start-square, .end-square {
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .start-square {
            background-color: #22c55e; /* Verde */
            color: white;
        }
        .end-square {
            background-color: #f59e0b; /* Amarelo */
            color: white;
        }
        .dice-animation {
            animation: roll 0.5s ease-in-out;
        }
        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* AnimaÃ§Ã£o de Confete */
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
            animation: drop 5s linear forwards;
        }
        @keyframes drop {
            0% { transform: translateY(-100px) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Tela do Jogo (inicialmente escondida) -->
    <div id="game-container" class="w-full max-w-5xl mx-auto hidden">
        <header class="text-center mb-6">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Trilha do Saber SAEB 2025</h1>
            <p class="text-lg text-gray-600 mt-2">LÃ­ngua Portuguesa - 9Âº Ano</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="md:col-span-2 bg-white p-4 rounded-xl shadow-lg">
                <div id="game-board" class="grid grid-cols-6 gap-2 relative">
                    <div id="pawns-container" class="absolute top-0 left-0 w-full h-full pointer-events-none">
                        <div id="player1-pawn" class="player-pawn">P1</div>
                        <div id="player2-pawn" class="player-pawn">P2</div>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col justify-between">
                <div>
                    <h2 class="text-2xl font-bold mb-4 text-gray-700">Painel do Jogo</h2>
                    <div id="game-status" class="mb-4 p-3 bg-blue-100 text-blue-800 rounded-lg text-center font-semibold"></div>
                    <div id="dice-container" class="text-center mb-4">
                        <p class="mb-2 text-gray-600">Clique no dado para jogar:</p>
                        <button id="dice" class="text-6xl p-4 rounded-full bg-white shadow-md hover:shadow-xl transition-shadow duration-300">ðŸŽ²</button>
                        <p id="dice-result" class="text-xl font-bold mt-2 h-8"></p>
                    </div>
                </div>
                <div class="text-center">
                     <button id="reset-button" class="w-full bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition-colors duration-300">
                        Reiniciar Jogo
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de Nomes (aparece primeiro) -->
    <div id="name-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Quem vai jogar?</h2>
            <div class="space-y-4 mb-8">
                <input type="text" id="player1-name" placeholder="Nome do Jogador 1" class="w-full p-3 border-2 border-gray-300 rounded-lg text-lg focus:border-blue-500 focus:ring-blue-500">
                <input type="text" id="player2-name" placeholder="Nome do Jogador 2" class="w-full p-3 border-2 border-gray-300 rounded-lg text-lg focus:border-blue-500 focus:ring-blue-500">
            </div>
            <button id="start-game-button" class="w-full bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl hover:bg-green-600 transition-colors duration-300">
                ComeÃ§ar a Jogar!
            </button>
        </div>
    </div>

    <!-- Modal de Perguntas -->
    <div id="question-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full transform transition-all scale-95 opacity-0" id="modal-content">
            <p class="text-sm font-semibold text-blue-600 mb-2" id="question-descriptor"></p>
            <div class="bg-gray-100 p-4 rounded-lg mb-4 max-h-40 overflow-y-auto">
                 <p class="text-gray-700 whitespace-pre-wrap" id="question-text"></p>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
             <div id="feedback" class="mt-4 text-center font-bold h-6"></div>
        </div>
    </div>
    
    <!-- Modal de Vencedor -->
    <div id="winner-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50 overflow-hidden">
        <div id="confetti-container" class="absolute inset-0"></div>
        <div class="bg-white rounded-2xl shadow-2xl p-8 text-center transform transition-all scale-95 opacity-0 relative" id="winner-content">
            <h2 class="text-5xl font-bold text-yellow-500 mb-4">ParabÃ©ns!</h2>
            <p id="winner-message" class="text-3xl text-gray-700 mb-8"></p>
            <button id="play-again-button" class="bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-green-600 transition-colors duration-300">
                Jogar Novamente
            </button>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const TOTAL_SQUARES = 30;
            const players = [
                { id: 1, name: "", position: 0, pawnElement: document.getElementById('player1-pawn') },
                { id: 2, name: "", position: 0, pawnElement: document.getElementById('player2-pawn') }
            ];
            let currentPlayerIndex = 0;
            let isAnswering = false;

            const gameContainer = document.getElementById('game-container');
            const nameModal = document.getElementById('name-modal');
            const startGameButton = document.getElementById('start-game-button');
            const gameBoard = document.getElementById('game-board');
            const diceButton = document.getElementById('dice');
            const diceResult = document.getElementById('dice-result');
            const gameStatus = document.getElementById('game-status');
            const questionModal = document.getElementById('question-modal');
            const modalContent = document.getElementById('modal-content');
            const winnerModal = document.getElementById('winner-modal');
            const winnerContent = document.getElementById('winner-content');
            const resetButton = document.getElementById('reset-button');
            const playAgainButton = document.getElementById('play-again-button');
            const confettiContainer = document.getElementById('confetti-container');

            const questions = [
                // Perguntas com textos completos
                { 
                    descriptor: "D18 - O Bicho (Manuel Bandeira)", 
                    text: `Leia o poema:\n\nO Bicho\nVi ontem um bicho\nNa imundÃ­cie do pÃ¡tio\nCatando comida entre os detritos.\nQuando achou alguma coisa,\nNÃ£o examinou nem cheirou:\nEngoliu com voracidade.\nO bicho nÃ£o era um cÃ£o,\nNÃ£o era um gato,\nNÃ£o era um rato.\nO bicho, meu Deus, era um homem.\n\nNo poema, o impacto causado pelos versos finais deve-se principalmente Ã :`, 
                    options: ["RevelaÃ§Ã£o da compaixÃ£o do poeta por animais.", "DenÃºncia das condiÃ§Ãµes precÃ¡rias dos animais.", "CrÃ­tica Ã  misÃ©ria que reduz o homem Ã  condiÃ§Ã£o de animal.", "ComparaÃ§Ã£o tÃ©cnica entre comportamentos."], 
                    correct: 2 
                },
                { 
                    descriptor: "D4 - Medo da eternidade (Clarice Lispector)", 
                    text: `Leia o trecho do conto:\n\n"Jamais esquecerei o meu aflitivo e dramÃ¡tico contato com a eternidade. (...) Afinal minha irmÃ£ juntou dinheiro, comprou e ao sairmos de casa para a escola me explicou: Tome cuidado para nÃ£o perder, porque esta bala nunca se acaba. Dura a vida toda."\n\nA partir da leitura, Ã© correto afirmar que a narradora:`, 
                    options: ["Adorou a experiÃªncia com o chiclete e ficou triste por perdÃª-lo.", "Sentiu-se angustiada com a ideia da eternidade representada pelo chiclete.", "Descobriu que o chiclete era raro e o guardou para sempre.", "Compartilhou com a irmÃ£ seu desagrado pelo sabor."], 
                    correct: 1 
                },
                { 
                    descriptor: "D16 - A Pipa e a Flor", 
                    text: `Leia o texto:\n\n"Era uma vez uma pipa que bailava no ar com o seu bailado pomposo e majestoso. (...) LÃ¡ de baixo, a flor gritou-lhe: - OlÃ¡! Como vocÃª Ã© bonita! (...) A pipa, orgulhosa, respondeu: (...) - Se me admiras tanto, porque nÃ£o sobes atÃ© junto de mim? (...) A flor, com toda a mÃ¡goa, respondeu: - NÃ£o posso! O meu caule Ã© muito curto e as minhas raÃ­zes estÃ£o presas Ã  terra. (...) A pipa, com o seu ar de superioridade, disse: - Coitadinha! Presa a essa terra... Nunca saberÃ¡s o que Ã© a liberdade..."\n\nNo texto, a pipa, por se sentir livre e poderosa no cÃ©u, passou a:`, 
                    options: ["Agradecer Ã  flor por sua amizade.", "Voltar para perto da flor todos os dias.", "Ignorar e desprezar a flor que a amava.", "Pedir que a flor subisse ao cÃ©u com ela."], 
                    correct: 2 
                },
                { 
                    descriptor: "D11 - A Galinha e os Ovos de Ouro", 
                    text: `Leia a fÃ¡bula:\n\n"Um camponÃªs e sua esposa possuÃ­am uma galinha que punha todo dia um ovo de ouro. Supondo que devia haver uma grande quantidade de ouro em seu interior, eles a mataram para que pudessem pegar tudo. EntÃ£o, para surpresa deles, viram que a galinha em nada era diferente das outras galinhas. O casal de tolos, desse modo, desejando ficar rico de uma sÃ³ vez, perdeu o ganho diÃ¡rio que tinha assegurado."\n\nO camponÃªs e sua esposa foram chamados de tolos porque:`, 
                    options: ["Venderam a galinha dos ovos de ouro.", "Perderam o sustento que haviam garantido.", "Acharam que a galinha era igual Ã s outras.", "Mataram a galinha que botava ovos de ouro."], 
                    correct: 1 
                },
                { 
                    descriptor: "D8 - Carros ElÃ©tricos", 
                    text: `Leia o trecho:\n\n"O presidente da Fiat Chrysler, SÃ©rgio Marchionne, afirmou que os carros elÃ©tricos nÃ£o sÃ£o a soluÃ§Ã£o para reduzir as emissÃµes de gases com efeito de estufa e o aquecimento global. 'A ideia de que os carros elÃ©tricos salvarÃ£o o planeta Ã© um disparate', sublinhou. 'A eletricidade nÃ£o vem do ar, Ã© preciso gerÃ¡-la.' Ele explicou que, se a eletricidade for produzida a partir de combustÃ­veis fÃ³sseis, 'o carro elÃ©trico nÃ£o terÃ¡ qualquer utilidade'."\n\nQual argumento Ã© utilizado por SÃ©rgio Marchionne para defender sua opiniÃ£o?`, 
                    options: ["Apelo emocional sobre a poluiÃ§Ã£o.", "Argumento de autoridade e de fatos sobre a geraÃ§Ã£o de energia.", "Analogia com outros meios de transporte.", "Senso comum sobre o preÃ§o dos carros."], 
                    correct: 1 
                },
                 { 
                    descriptor: "D1 - O que Ã© o bullying?", 
                    text: `Leia o texto:\n\n"Bullying Ã© uma palavra inglesa que significa usar o poder ou a forÃ§a para intimidar, excluir, humilhar os outros. Ã‰ uma forma de violÃªncia que ocorre de forma intencional e repetitiva contra uma ou mais pessoas. As agressÃµes podem ser de ordem fÃ­sica, verbal ou psicolÃ³gica, e acontecem, na maioria das vezes, no ambiente escolar."\n\nDe acordo com o texto, as agressÃµes do bullying se manifestam de que formas?`, 
                    options: ["Apenas como apelidos maldosos.", "Somente atravÃ©s de boatos.", "De forma fÃ­sica, verbal ou psicolÃ³gica.", "Exclusivamente no ambiente online."], 
                    correct: 2 
                },
                { 
                    descriptor: "D9 - Fato vs OpiniÃ£o (Bullying)", 
                    text: `Leia o texto:\n\n"Bullying Ã© uma palavra inglesa que significa usar o poder ou a forÃ§a para intimidar, excluir, humilhar os outros. (...) Ã‰ um problema que afeta crianÃ§as e jovens em todo o mundo e, por isso, merece mais atenÃ§Ã£o de pais, educadores e da sociedade em geral."\n\nQual trecho do texto expressa uma opiniÃ£o?`, 
                    options: ["Bullying Ã© uma forma de violÃªncia.", "AgressÃµes podem ser fÃ­sicas ou verbais.", "Merece mais atenÃ§Ã£o de pais, educadores e da sociedade.", "A palavra 'bullying' tem origem inglesa."], 
                    correct: 2 
                },
                // Perguntas genÃ©ricas ou com descriÃ§Ã£o de imagem
                { descriptor: "D19 - Linguagem verbal e nÃ£o verbal", text: `[IMAGEM: Charge com um homem sentado e outro em pÃ©, com um livro aberto na cabeÃ§a.] Homem sentado: "Como vai a leitura?"\n\nNa charge, a combinaÃ§Ã£o da pergunta com a imagem do homem-livro cria um efeito de:`, options: ["Tristeza", "Humor", "ConfusÃ£o", "Raiva"], correct: 1 },
                { descriptor: "D5 - InterpretaÃ§Ã£o de texto com linguagem mista", text: `[IMAGEM: Peixe com mÃ¡scara de gÃ¡s, nadando em Ã¡gua poluÃ­da, diz: "Ainda bem que o ser humano Ã© um ser racional."] A fala do peixe revela:`, options: ["AdmiraÃ§Ã£o pela inteligÃªncia humana.", "Deboche pela atitude contraditÃ³ria do ser humano.", "PreocupaÃ§Ã£o com a falta de oxigÃªnio na Ã¡gua.", "EsperanÃ§a de que os humanos resolvam a poluiÃ§Ã£o."], correct: 1 },
                { descriptor: "D19 - Linguagem mista", text: `[IMAGEM: Placa de trÃ¢nsito com um 'E' cortado por uma faixa vermelha.]\n\nEssa placa, sem nenhuma palavra, comunica a mensagem de:`, options: ["Estacione aqui.", "Proibido estacionar.", "Entrada livre.", "Escola prÃ³xima."], correct: 1 },
                { descriptor: "D6 - Identificar tema", text: `Um texto que narra a histÃ³ria da invenÃ§Ã£o do telefone e sua evoluÃ§Ã£o atÃ© os smartphones atuais tem como tema:`, options: ["A biografia de Graham Bell.", "A histÃ³ria dos meios de comunicaÃ§Ã£o.", "Os perigos da tecnologia.", "As regras de etiqueta ao celular."], correct: 1 },
                { descriptor: "D12 - Finalidade de um texto", text: `Um manual de instruÃ§Ãµes de um videogame tem como principal finalidade:`, options: ["Vender o produto.", "Divertir o leitor.", "Criticar o jogo.", "Ensinar a jogar."], correct: 3 },
                { descriptor: "D4 - Inferir informaÃ§Ã£o", text: `Se um personagem diz "O dia estÃ¡ amanhecendo e eu nÃ£o dormi nada!", infere-se que ele provavelmente passou a noite:`, options: ["Dormindo profundamente.", "Preocupado ou em alguma atividade.", "Viajando para longe.", "Lendo um livro chato."], correct: 1 },
                { descriptor: "D15 - CoesÃ£o", text: `Na frase "Ele estudou muito, *portanto*, foi aprovado.", a palavra destacada introduz uma:`, options: ["OposiÃ§Ã£o", "Causa", "CondiÃ§Ã£o", "ConclusÃ£o"], correct: 3 },
                { descriptor: "D17 - Efeito de sentido", text: `Na frase "A notÃ­cia caiu como uma *bomba*", a palavra destacada tem o sentido de algo:`, options: ["Explosivo e perigoso.", "Inesperado e chocante.", "Barulhento e irritante.", "Valioso e raro."], correct: 1 },
                { descriptor: "D21 - RelaÃ§Ãµes lÃ³gico-discursivas", text: `Em "Ele nÃ£o virÃ¡ Ã  festa, *a menos que* termine o trabalho.", a expressÃ£o destacada estabelece uma relaÃ§Ã£o de:`, options: ["Finalidade", "CondiÃ§Ã£o", "ConsequÃªncia", "ProporÃ§Ã£o"], correct: 1 },
                { descriptor: "D9 - Fato vs. OpiniÃ£o", text: `Qual das frases abaixo representa um FATO?`, options: ["O filme foi incrivelmente chato.", "Acredito que todos deveriam ler este livro.", "O Brasil Ã© um paÃ­s localizado na AmÃ©rica do Sul.", "Essa Ã© a melhor mÃºsica do ano."], correct: 2 },
                { descriptor: "D20 - PontuaÃ§Ã£o", text: `O uso das aspas em "Ele disse que estava 'bem'" pode indicar:`, options: ["Certeza absoluta.", "Uma citaÃ§Ã£o direta.", "Ironia ou que a pessoa nÃ£o estÃ¡ bem de verdade.", "Um erro de gramÃ¡tica."], correct: 2 },
                // Mais 22 perguntas para totalizar 40
                { descriptor: "D1 - Localizar informaÃ§Ãµes explÃ­citas", text: `Leia o trecho da notÃ­cia:\n\n"A pequena cidade de Monte Verde, em Minas Gerais, foi eleita o destino mais acolhedor do mundo em 2024..."\n\nQual cidade foi eleita o destino mais acolhedor?`, options: ["Serra Negra", "Campos do JordÃ£o", "Monte Verde", "Gramado"], correct: 2 },
                { descriptor: "D3 - Inferir o sentido de uma palavra", text: `Na frase: "O atleta, com uma performance estelar, pulverizou o recorde anterior."\n\nA palavra "pulverizou" tem o sentido de:`, options: ["Destruiu em pedaÃ§os", "Superou com vantagem", "Limpou com cuidado", "Esqueceu completamente"], correct: 1 },
                { descriptor: "D4 - Inferir informaÃ§Ã£o implÃ­cita", text: `[IMAGEM: Menino olha brÃ³colis com nojo. Depois, sorri e o cachorro lambe os beiÃ§os.]\nMÃ£e: "Comeu tudo? Que orgulho!"\n\nO que provavelmente aconteceu?`, options: ["O menino adorou brÃ³colis.", "O cachorro comeu o brÃ³colis.", "A mÃ£e cozinhou mais.", "O menino comeu a raÃ§Ã£o."], correct: 1 },
                { descriptor: "D6 - Identificar o tema", text: `Um texto sobre desmatamento, gases de efeito estufa e derretimento de calotas polares tem como tema principal:`, options: ["Economia desenvolvida", "Vida selvagem", "MudanÃ§as climÃ¡ticas", "Reciclagem de lixo"], correct: 2 },
                { descriptor: "D12 - Identificar a finalidade", text: `Uma receita de "Bolo de Cenoura" com ingredientes e modo de preparo tem qual finalidade principal?`, options: ["Contar uma histÃ³ria", "Anunciar um produto", "Instruir como fazer algo", "Criticar um prato"], correct: 2 },
                { descriptor: "D15 - Reconhecer coesÃ£o", text: `Na frase: "O estudante leu o livro, *mas* nÃ£o entendeu a histÃ³ria.", a palavra destacada estabelece uma relaÃ§Ã£o de:`, options: ["AdiÃ§Ã£o", "ConclusÃ£o", "ExplicaÃ§Ã£o", "OposiÃ§Ã£o"], correct: 3 },
                { descriptor: "D17 - Efeito de sentido de palavra", text: `Compare as frases:\n1. "Ele mora em um *casebre*."\n2. "Ele mora em uma *mansÃ£o*."\nAs palavras "casebre" e "mansÃ£o" indicam, respectivamente:`, options: ["Modernidade e antiguidade", "Pobreza e riqueza", "Tamanho grande e pequeno", "Beleza e feiura"], correct: 1 },
                { descriptor: "D18 - Efeito de sentido (morfossintaxe)", text: `Qual o efeito de sentido do diminutivo na frase: "Que *jeitinho* complicado ele tem!"?`, options: ["Carinho", "Ironia", "Tamanho pequeno", "AdmiraÃ§Ã£o"], correct: 1 },
                { descriptor: "D14 - Medo da eternidade", text: `No conto "Medo da Eternidade", na frase "Perder a eternidade? Nunca.", o ponto de interrogaÃ§Ã£o revela:`, options: ["DÃºvida genuÃ­na", "Questionamento retÃ³rico de determinaÃ§Ã£o", "Pergunta para a irmÃ£", "Incerteza sobre a duraÃ§Ã£o"], correct: 1 },
                { descriptor: "D6 - Campanha contra a Dengue", text: `[IMAGEM: Campanha com vaso, pneu, garrafa e o texto "NÃƒO DEIXE ÃUA PARADA..."]\n\nO principal objetivo da campanha Ã©:`, options: ["Informar tipos de criadouros", "Conscientizar sobre reciclagem", "Incentivar o cultivo de plantas", "Orientar sobre prevenÃ§Ã£o da dengue"], correct: 3 },
                { descriptor: "D3 - Campanha contra a Dengue", text: `Na frase da campanha: "Um simples gesto pode salvar vidas.", sugere-se que:`, options: ["Qualquer um pode ser herÃ³i", "AÃ§Ãµes pequenas tÃªm grande impacto", "SÃ³ profissionais de saÃºde sÃ£o responsÃ¡veis", "O governo precisa investir mais"], correct: 1 },
                 { 
                    descriptor: "D13 - Comparar textos", 
                    text: `Ao comparar os textos "A Pipa e a Flor" e "O Bicho", pode-se afirmar que:`, 
                    options: ["Ambos sÃ£o fÃ¡bulas com animais falantes.", "Ambos criticam problemas sociais.", "O primeiro fala de sentimentos, e o segundo de misÃ©ria.", "Os dois textos usam uma linguagem formal."], 
                    correct: 2 
                },
                { 
                    descriptor: "D14 - RelaÃ§Ã£o entre partes de um texto", 
                    text: `Na fÃ¡bula "O leÃ£o e o rato", o leÃ£o nÃ£o comeu o rato porque:`, 
                    options: ["Sentiu pena da fragilidade do rato.", "O rato prometeu pagar sua dÃ­vida um dia.", "Achou que o rato era insignificante para uma refeiÃ§Ã£o.", "NÃ£o estava com fome naquele momento."], 
                    correct: 2 
                },
                { 
                    descriptor: "D11 - RelaÃ§Ã£o de causa e consequÃªncia", 
                    text: `Qual foi a consequÃªncia do leÃ£o ter poupado a vida do rato na fÃ¡bula "O LeÃ£o e o Rato"?`, 
                    options: ["O rato se tornou o rei da floresta.", "O leÃ£o foi capturado por caÃ§adores.", "O rato salvou o leÃ£o de uma armadilha.", "Os outros animais passaram a temer o rato."], 
                    correct: 2 
                },
                { 
                    descriptor: "D20 - Efeito de sentido (pontuaÃ§Ã£o)", 
                    text: `No trecho "Ah, o amor...", o uso das reticÃªncias (...) sugere:`, 
                    options: ["Uma interrupÃ§Ã£o brusca da fala.", "Uma continuaÃ§Ã£o do pensamento, um suspiro.", "Uma dÃºvida sobre o que Ã© o amor.", "Um erro de digitaÃ§Ã£o no texto."], 
                    correct: 1 
                },
                { 
                    descriptor: "D10 - VariaÃ§Ã£o linguÃ­stica", 
                    text: `A expressÃ£o "E aÃ­, mano, beleza?" Ã© um exemplo de qual tipo de variaÃ§Ã£o linguÃ­stica?`, 
                    options: ["HistÃ³rica", "Regional", "Social (gÃ­ria)", "Formal"], 
                    correct: 2 
                },
                { 
                    descriptor: "D8 - Tese e argumentos", 
                    text: `Num texto que defende o uso de bicicletas, a afirmaÃ§Ã£o "reduz o trÃ¢nsito e nÃ£o polui o ar" funciona como:`, 
                    options: ["Uma tese.", "Um exemplo.", "Um argumento.", "Uma opiniÃ£o contrÃ¡ria."], 
                    correct: 2 
                },
                { 
                    descriptor: "D1 - Localizar informaÃ§Ã£o", 
                    text: `No texto informativo sobre o Chocolate, a matÃ©ria-prima principal para sua produÃ§Ã£o Ã©:`, 
                    options: ["AÃ§Ãºcar", "Leite", "Cacau", "Manteiga"], 
                    correct: 2 
                },
                {
                    descriptor: "D7 - Identificar tese", 
                    text: `Qual Ã© a tese principal defendida no texto "A Pipa e a Flor"?`, 
                    options: ["A liberdade Ã© mais importante que o amor.", "O orgulho pode levar Ã  solidÃ£o e Ã  perda.", "A beleza das flores Ã© passageira.", "Amizades verdadeiras superam qualquer distÃ¢ncia."], 
                    correct: 1 
                },
                { 
                    descriptor: "D1 - O uso das tecnologias na escola", 
                    text: `Segundo um texto que debate o uso de tecnologias na escola, a posiÃ§Ã£o mais adequada seria:`, 
                    options: ["RejeitÃ¡-las completamente", "AdotÃ¡-las integralmente", "UtilizÃ¡-las de forma equilibrada", "UsÃ¡-las apenas para recreaÃ§Ã£o"], 
                    correct: 2 
                },
                { 
                    descriptor: "D21 - RelaÃ§Ã£o entre partes do texto", 
                    text: `No trecho: "*Entretanto*, a mera presenÃ§a de equipamentos tecnolÃ³gicos nÃ£o garante melhoria...", o conectivo "entretanto" estabelece uma relaÃ§Ã£o de:`, 
                    options: ["AdiÃ§Ã£o", "OposiÃ§Ã£o", "ConclusÃ£o", "ExplicaÃ§Ã£o"], 
                    correct: 1 
                },
                { 
                    descriptor: "D2 - O uso das tecnologias na escola", 
                    text: `No trecho: "A tecnologia deve ser encarada como uma ferramenta auxiliar, nÃ£o como *protagonista*...", o termo "protagonista" significa:`, 
                    options: ["Personagem principal", "Elemento inovador", "Recurso ultrapassado", "Componente secundÃ¡rio"], 
                    correct: 0 
                },
            ];

            function initGame() {
                players[0].name = document.getElementById('player1-name').value || 'Jogador 1';
                players[1].name = document.getElementById('player2-name').value || 'Jogador 2';
                
                players.forEach(p => p.position = 0);
                currentPlayerIndex = 0;
                isAnswering = false;
                diceResult.textContent = '';
                
                nameModal.classList.add('hidden');
                gameContainer.classList.remove('hidden');

                createBoard();
                players.forEach(updatePawnPosition);
                updateGameStatus();
            }
            
            function updateGameStatus() {
                gameStatus.textContent = `Vez de ${players[currentPlayerIndex].name}`;
            }

            function createBoard() {
                const pawnsContainer = document.getElementById('pawns-container');
                gameBoard.innerHTML = ''; 
                for (let i = 1; i <= TOTAL_SQUARES; i++) {
                    const square = document.createElement('div');
                    square.classList.add('board-square', 'h-16', 'md:h-20', 'border-2', 'border-gray-300', 'rounded-lg', 'flex', 'items-center', 'justify-center', 'font-bold', 'text-gray-700');
                    if(i === 1) {
                        square.classList.add('start-square');
                        square.innerHTML = 'INÃCIO';
                    } else if (i === TOTAL_SQUARES) {
                        square.classList.add('end-square');
                        square.innerHTML = 'FIM';
                    } else {
                         square.textContent = i;
                         const colors = ['bg-blue-100', 'bg-green-100', 'bg-red-100', 'bg-yellow-100', 'bg-purple-100'];
                         square.classList.add(colors[i % colors.length]);
                    }
                    square.dataset.square = i;
                    gameBoard.appendChild(square);
                }
                gameBoard.appendChild(pawnsContainer);
            }
            
            function updatePawnPosition(player) {
                const squareIndex = player.position > 0 ? player.position - 1 : 0;
                const targetSquare = gameBoard.children[squareIndex];
                if (!targetSquare) return;

                const boardRect = gameBoard.getBoundingClientRect();
                const squareRect = targetSquare.getBoundingClientRect();
                
                let centerX = (squareRect.left - boardRect.left) + (squareRect.width / 2);
                let centerY = (squareRect.top - boardRect.top) + (squareRect.height / 2);

                if (players.length > 1) {
                    if (player.id === 1) centerX -= squareRect.width * 0.15;
                    else centerX += squareRect.width * 0.15;
                }
                
                player.pawnElement.style.top = `${centerY}px`;
                player.pawnElement.style.left = `${centerX}px`;
            }


            function rollDice() {
                if (isAnswering) return;
                diceButton.classList.add('dice-animation');
                
                setTimeout(() => {
                    const roll = Math.floor(Math.random() * 6) + 1;
                    diceResult.textContent = `VocÃª tirou ${roll}`;
                    diceButton.classList.remove('dice-animation');
                    movePlayer(roll);
                }, 500);
            }
            
            function movePlayer(steps) {
                const player = players[currentPlayerIndex];
                player.position += steps;
                player.position = Math.min(player.position, TOTAL_SQUARES);
                
                updatePawnPosition(player);
                
                if (player.position >= TOTAL_SQUARES) {
                     setTimeout(() => showWinner(player), 700);
                } else {
                    setTimeout(askQuestion, 700);
                }
            }

            function askQuestion() {
                isAnswering = true;
                const questionData = questions[Math.floor(Math.random() * questions.length)];

                document.getElementById('question-descriptor').textContent = questionData.descriptor;
                document.getElementById('question-text').textContent = questionData.text;

                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';

                questionData.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('p-3', 'bg-gray-200', 'rounded-lg', 'text-left', 'hover:bg-blue-500', 'hover:text-white', 'transition-colors');
                    button.onclick = () => checkAnswer(index, questionData.correct);
                    optionsContainer.appendChild(button);
                });
                
                document.getElementById('feedback').innerHTML = '';
                showModal(questionModal, modalContent);
            }

            function checkAnswer(selectedIndex, correctIndex) {
                const options = document.getElementById('options-container').children;
                const feedbackEl = document.getElementById('feedback');
                
                Array.from(options).forEach(btn => btn.disabled = true);
                
                if (selectedIndex === correctIndex) {
                    options[selectedIndex].classList.add('bg-green-500', 'text-white');
                    feedbackEl.textContent = "Resposta Correta!";
                    feedbackEl.className = 'mt-4 text-center font-bold h-6 text-green-600';
                } else {
                    options[selectedIndex].classList.add('bg-red-500', 'text-white');
                    options[correctIndex].classList.add('bg-green-500', 'text-white');
                    feedbackEl.textContent = "Resposta Incorreta!";
                    feedbackEl.className = 'mt-4 text-center font-bold h-6 text-red-600';

                    const player = players[currentPlayerIndex];
                    player.position = Math.max(0, player.position - 2);
                    setTimeout(() => updatePawnPosition(player), 500);
                }

                setTimeout(() => {
                    hideModal(questionModal, modalContent);
                    switchPlayer();
                }, 2000);
            }

            function switchPlayer() {
                currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
                updateGameStatus();
                isAnswering = false;
                diceResult.textContent = '';
            }
            
            function showWinner(player) {
                document.getElementById('winner-message').textContent = `${player.name} venceu!`;
                showModal(winnerModal, winnerContent);
                launchConfetti();
            }

            function launchConfetti() {
                confettiContainer.innerHTML = '';
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti-piece');
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.animationDelay = `${Math.random() * 5}s`;
                    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                    confettiContainer.appendChild(confetti);
                }
            }

            function startNewGame() {
                hideModal(winnerModal, winnerContent);
                confettiContainer.innerHTML = '';
                gameContainer.classList.add('hidden');
                nameModal.classList.remove('hidden');
                document.getElementById('player1-name').value = '';
                document.getElementById('player2-name').value = '';
            }
            
            function showModal(modal, content) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    content.classList.remove('scale-95', 'opacity-0');
                    content.classList.add('scale-100', 'opacity-100');
                }, 10);
            }
            
            function hideModal(modal, content) {
                 content.classList.add('scale-95', 'opacity-0');
                 setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            startGameButton.addEventListener('click', initGame);
            diceButton.addEventListener('click', rollDice);
            resetButton.addEventListener('click', startNewGame);
            playAgainButton.addEventListener('click', startNewGame);
        });
    </script>
</body>
</html>

